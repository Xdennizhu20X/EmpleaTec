<div class="min-h-screen bg-gradient-to-br from-royal-blue-50 to-royal-blue-100 text-gray-800 font-sans">
  <!-- Sticky Header -->
  <header class="sticky top-0 z-30 flex items-center justify-between p-4 bg-white/30 backdrop-blur-md shadow-sm">
    <button class="flex items-center gap-2 text-gray-700 hover:text-royal-blue-600 transition-colors">
      <i-lucide name="arrow-left" class="w-5 h-5"></i-lucide>
      <span class="font-medium">Volver</span>
    </button>
    <div class="flex items-center gap-2">
      <button class="p-2 rounded-full hover:bg-white/50 transition-colors">
        <i-lucide name="heart" class="w-5 h-5 text-gray-700"></i-lucide>
      </button>
      <button class="p-2 rounded-full hover:bg-white/50 transition-colors">
        <i-lucide name="share-2" class="w-5 h-5 text-gray-700"></i-lucide>
      </button>
    </div>
  </header>

  <!-- Profile Content -->
  <main class="p-4 md:p-8" *ngIf="worker">
    <!-- Main Profile Card (Glassmorphism) -->
    <div class="relative rounded-2xl bg-white/40 backdrop-blur-lg shadow-lg overflow-hidden border border-white/20">
      <!-- Cover Image -->
      <div class="h-48 md:h-64 bg-cover bg-center relative" [style.background-image]="'url(' + worker.coverImageUrl + ')'">
        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
        <!-- Online Indicator -->
        <div *ngIf="worker.isOnline" class="absolute top-4 right-4 flex items-center gap-2 bg-green-500/80 text-white px-3 py-1 rounded-full text-sm">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-300 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-green-400"></span>
          </span>
          En línea
        </div>
      </div>

      <!-- Profile Details -->
      <div class="p-4 md:p-6">
        <!-- Avatar and Basic Info -->
        <div class="flex flex-col sm:flex-row items-center sm:items-end -mt-20 sm:-mt-24 gap-4">
          <img [src]="worker.avatarUrl" alt="Avatar de {{ worker.name }}" class="w-32 h-32 rounded-full border-4 border-white shadow-md object-cover">
          <div class="text-center sm:text-left w-full">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-900">{{ worker.name }}</h1>
            <p class="text-royal-blue-800 font-medium text-lg">{{ worker.specialty }}</p>
            <!-- Specialty Badges -->
            <div class="flex gap-2 mt-2 justify-center sm:justify-start">
              <span *ngFor="let icon of worker.specialtyIcons" class="bg-royal-blue-100 text-royal-blue-700 p-1.5 rounded-md">
                <i-lucide [name]="icon" class="w-4 h-4"></i-lucide>
              </span>
            </div>
          </div>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mt-6 text-center border-t border-white/30 pt-4">
          <div class="p-2 rounded-lg bg-white/30">
            <div class="flex items-center justify-center gap-1 font-bold text-yellow-500"><i-lucide name="star" class="w-4 h-4"></i-lucide> {{ worker.rating?.toFixed(1) }}</div>
            <p class="text-xs text-gray-600">Calificación</p>
          </div>
          <div class="p-2 rounded-lg bg-white/30">
            <div class="flex items-center justify-center gap-1 font-bold text-green-600"><i-lucide name="check-circle" class="w-4 h-4"></i-lucide> {{ worker.jobsCompleted }}</div>
            <p class="text-xs text-gray-600">Trabajos</p>
          </div>
          <div class="p-2 rounded-lg bg-white/30">
            <div class="flex items-center justify-center gap-1 font-bold text-blue-600"><i-lucide name="clock" class="w-4 h-4"></i-lucide> {{ worker.experience }}+</div>
            <p class="text-xs text-gray-600">Años Exp.</p>
          </div>
          <div class="p-2 rounded-lg bg-white/30">
            <div class="flex items-center justify-center gap-1 font-bold text-purple-600"><i-lucide name="map-pin" class="w-4 h-4"></i-lucide></div>
            <p class="text-xs text-gray-600">{{ worker.location }}</p>
          </div>
          <div class="p-2 rounded-lg bg-white/30 col-span-2 sm:col-span-1">
            <div class="flex items-center justify-center gap-1 font-bold text-gray-700"><i-lucide name="dollar-sign" class="w-4 h-4"></i-lucide> {{ worker.priceRange?.min }} - {{ worker.priceRange?.max }}</div>
            <p class="text-xs text-gray-600">Precios (MXN)</p>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-3 mt-6">
          <button class="w-full bg-royal-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-royal-blue-700 transition-all shadow-md">Contactar Ahora</button>
          <button class="w-full bg-gray-200 text-gray-800 font-bold py-3 px-4 rounded-lg hover:bg-gray-300 transition-all">Llamar</button>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="mt-8">
      <!-- Tab Headers -->
      <div class="border-b border-gray-300/50">
        <nav class="flex gap-4 -mb-px" aria-label="Tabs">
          <button (click)="activeTab = 'portfolio'" [class.border-royal-blue-500]="activeTab === 'portfolio'" [class.text-royal-blue-600]="activeTab === 'portfolio'" class="py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-royal-blue-600 hover:border-royal-blue-500 transition-colors">
            Portafolio
          </button>
          <button (click)="activeTab = 'about'" [class.border-royal-blue-500]="activeTab === 'about'" [class.text-royal-blue-600]="activeTab === 'about'" class="py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-royal-blue-600 hover:border-royal-blue-500 transition-colors">
            Acerca de
          </button>
          <button (click)="activeTab = 'reviews'" [class.border-royal-blue-500]="activeTab === 'reviews'" [class.text-royal-blue-600]="activeTab === 'reviews'" class="py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-royal-blue-600 hover:border-royal-blue-500 transition-colors">
            Reseñas
          </button>
        </nav>
      </div>

      <!-- Tab Content -->
      <div class="py-6">
        <!-- Portfolio Tab -->
        <div *ngIf="activeTab === 'portfolio'">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <div *ngFor="let item of worker.portfolio" class="rounded-lg overflow-hidden bg-white/50 shadow-md hover:shadow-xl transition-shadow cursor-pointer border border-white/20" (click)="openPortfolioModal(item)">
              <img [src]="item.imageUrl" [alt]="item.title" class="w-full h-48 object-cover">
              <div class="p-4">
                <h3 class="font-bold text-lg">{{ item.title }}</h3>
                <p class="text-sm text-gray-600 mt-1">{{ item.description }}</p>
                <div class="flex items-center justify-between text-xs text-gray-500 mt-4">
                  <span><i-lucide name="calendar" class="inline w-3 h-3 mr-1"></i-lucide>{{ item.date | date: 'mediumDate' }}</span>
                  <span>{{ item.clientName }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- About Tab -->
        <div *ngIf="activeTab === 'about'">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 p-6 rounded-lg bg-white/50 shadow-md border border-white/20">
                    <h3 class="font-bold text-xl mb-2">Biografía</h3>
                    <p class="text-gray-700 leading-relaxed">{{ worker.bio }}</p>
                </div>
                <div class="space-y-6">
                    <div class="p-6 rounded-lg bg-white/50 shadow-md border border-white/20">
                        <h3 class="font-bold text-xl mb-2">Certificaciones</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex items-center gap-2"><i-lucide name="award" class="w-5 h-5 text-royal-blue-600"></i-lucide> Certificación CONALEP</li>
                        </ul>
                    </div>
                    <div class="p-6 rounded-lg bg-white/50 shadow-md border border-white/20">
                        <h3 class="font-bold text-xl mb-2">Verificaciones</h3>
                        <ul class="space-y-2 text-gray-700">
                            <li class="flex items-center gap-2"><i-lucide name="check-circle" class="w-5 h-5 text-green-500"></i-lucide> Identidad Verificada</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reviews Tab -->
        <div *ngIf="activeTab === 'reviews'">
          <!-- Placeholder for UserReviews component -->
          <div class="p-6 rounded-lg bg-white/50 shadow-md border border-white/20">
            <h3 class="font-bold text-xl mb-2">Reseñas de Clientes</h3>
            <p class="text-gray-600">El componente de reseñas se mostrará aquí.</p>
            <!-- <app-user-reviews [reviews]="worker.reviews"></app-user-reviews> -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Portfolio Item Modal -->
  <div *ngIf="selectedPortfolioItem" class="fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4" (click)="closePortfolioModal()">
    <div class="bg-white rounded-lg shadow-2xl max-w-3xl w-full max-h-full overflow-auto" (click)="$event.stopPropagation()">
        <img [src]="selectedPortfolioItem.imageUrl" [alt]="selectedPortfolioItem.title" class="w-full h-auto max-h-[60vh] object-contain">
        <div class="p-6">
            <h2 class="text-2xl font-bold mb-2">{{ selectedPortfolioItem.title }}</h2>
            <p class="text-gray-700 mb-4">{{ selectedPortfolioItem.description }}</p>
            <div class="flex items-center justify-between text-sm text-gray-500 border-t pt-4">
                <span><i-lucide name="user" class="inline w-4 h-4 mr-1"></i-lucide>Cliente: {{ selectedPortfolioItem.clientName }}</span>
                <span><i-lucide name="calendar" class="inline w-4 h-4 mr-1"></i-lucide>{{ selectedPortfolioItem.date | date: 'fullDate' }}</span>
            </div>
        </div>
        <button (click)="closePortfolioModal()" class="absolute top-4 right-4 p-2 bg-white/50 rounded-full text-gray-800 hover:bg-white transition-colors">
            <i-lucide name="x" class="w-6 h-6"></i-lucide>
        </button>
    </div>
  </div>
</div>